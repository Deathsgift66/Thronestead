<!--
Project Name: Thronestead¬©
File Name: kingdom_achievements.html
Version:  7/1/2025 10:38
Developer: Deathsgift66
-->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; frame-ancestors 'none';" />

  <title>Kingdom Achievements | Thronestead</title>
  <meta name="description" content="View the achievements unlocked by your kingdom in Thronestead." />
  <meta name="keywords" content="Thronestead, achievements, progress, kingdom rewards" />
  <meta name="robots" content="index, follow" />
  <link rel="canonical" href="https://www.thronestead.com/kingdom_achievements.html" />

  <!-- Open Graph -->
  <meta property="og:title" content="Kingdom Achievements | Thronestead" />
  <meta property="og:description" content="Track your kingdom's accomplishments and unlock legendary rewards in Thronestead." />
  <meta property="og:image" content="Assets/banner_main.png" />
  <meta property="og:url" content="kingdom_achievements.html" />
  <meta property="og:type" content="website" />

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Kingdom Achievements | Thronestead" />
  <meta name="twitter:description" content="View the legendary achievements your kingdom has unlocked in Thronestead." />
  <meta name="twitter:image" content="Assets/banner_main.png" />

  <!-- Page-Specific Assets -->
  <link href="/CSS/kingdom_achievements.css" rel="stylesheet" />

  <!-- Global Assets -->
  <link rel="icon" href="/Assets/favicon.ico" type="image/x-icon" />
  <link href="/CSS/root_theme.css" rel="stylesheet" />
  <link href="/CSS/kr_navbar.css" rel="stylesheet" />
  <link href="/CSS/resource_bar.css" rel="stylesheet" />

<!-- ‚úÖ Injected standard Thronestead modules -->
  <script src="/Javascript/components/authGuard.js" type="module"></script>
  <script src="/Javascript/apiHelper.js" type="module"></script>
  <script src="/Javascript/navLoader.js" type="module"></script>
  <script src="/Javascript/resourceBar.js" type="module"></script>
</head>

<body>
  <noscript>
    <div class="noscript-warning">
      JavaScript is disabled in your browser. Some features of Thronestead may not function correctly.
    </div>
  </noscript>

<div id="navbar-container"></div>
<div id="resource-bar-container"></div>

<!-- Navbar -->

<!-- Page Banner -->
<header class="kr-top-banner" aria-label="Kingdom Achievements Banner">
  Thronestead ‚Äî Kingdom Achievements
</header>

<!-- Main Interface -->
<main role="main" class="main-centered-container" aria-label="Kingdom Achievements Interface">
  <section class="alliance-members-container parchment-bg">
    <h2 class="golden-header">Your Kingdom Achievements</h2>
    <p>Track accomplishments and rewards earned by your kingdom over time.</p>

    <!-- Summary Block -->
    <section id="progress-summary" class="progress-summary" aria-label="Achievement Progress Summary">
      <p><strong>üèÖ Achievements Unlocked:</strong> <span id="achieved-count">0</span> / <span id="total-count">0</span></p>
      <progress id="achievement-progress" max="100" value="0"></progress>
    </section>

    <!-- Filters -->
    <section id="filter-toolbar" class="filter-toolbar" aria-label="Achievement Filters"></section>

    <!-- Achievement Badges -->
    <div id="achievement-grid" class="badge-grid" aria-live="polite">
      <!-- Cards injected here -->
    </div>

    <!-- Modal Display -->
    <div id="achievement-modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="achievement-modal-title" aria-hidden="true">
      <!-- Modal contents injected by JS -->
    </div>
  </section>
</main>

<!-- Footer -->
<footer class="site-footer">
  <div>¬© 2025 Thronestead</div>
  <div>
    <a target="_blank" rel="noopener noreferrer" href="Assets/legal/THRONESTEAD_PrivacyPolicy.pdf">Privacy Policy</a>
    <a target="_blank" rel="noopener noreferrer" href="Assets/legal/THRONESTEAD_TermsofService.pdf">Terms of Service</a>
    <a target="_blank" rel="noopener noreferrer" href="Assets/legal/THRONESTEAD_EULA.pdf">EULA</a>
    <a href="legal.html" target="_blank">and more</a> <a href="sitemap.xml" target="_blank">Site Map</a>
  </div>
</footer>
  <script type="module">
    import { initAchievementsPage } from '/Javascript/gameplay_progression.js';
    initAchievementsPage();
  </script>

  <!-- Backend route definitions for reference -->
  <script type="text/python">
# Project Name: Thronestead¬©
# File Name: kingdom_achievements.py
# Version:  7/1/2025 10:38
# Developer: Deathsgift66

"""
Project: Thronestead ¬©
File: kingdom_achievements.py
Role: API routes for kingdom achievements.
Version: 2025-06-21
"""

from fastapi import APIRouter, Depends
from sqlalchemy.orm import Session

from services.kingdom_achievement_service import list_achievements

from ..database import get_db
from ..security import require_user_id
from .progression_router import get_kingdom_id

# Set up router
router = APIRouter(prefix="/api/kingdom/achievements", tags=["kingdom_achievements"])


@router.get("")
async def get_achievements(
    user_id: str = Depends(require_user_id),
    db: Session = Depends(get_db),
):
    """
    ‚úÖ Endpoint: Get Kingdom Achievements

    Returns a list of all available achievements and whether they‚Äôve been unlocked
    by the authenticated user's kingdom.

    Returns:
        {
            "achievements": [
                {
                    "achievement_code": "first_quest",
                    "name": "First Steps",
                    "description": "Complete your first kingdom quest.",
                    "category": "progression",
                    "points_reward": 10,
                    "badge_icon_url": "url",
                    "is_hidden": false,
                    "is_repeatable": false,
                    "unlocked": true,
                    "awarded_at": "2025-06-01T12:00:00Z"
                },
                ...
            ]
        }
    """
    # Resolve kingdom ID linked to the user
    kingdom_id = get_kingdom_id(db, user_id)

    # Fetch full achievement list with unlock status
    achievements = list_achievements(db, kingdom_id)

    return {"achievements": achievements}
  </script>


</body>
</html>
